# SocketChatSystem

<div align="center">

![C++](https://img.shields.io/badge/C++-17-blue.svg)
![Platform](https://img.shields.io/badge/platform-macOS-lightgrey.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

ä¸€ä¸ªåŸºäº C++17 å’Œ ImGui çš„é«˜æ€§èƒ½å¯è§†åŒ–èŠå¤©ä¸æ–‡ä»¶ä¼ è¾“ç³»ç»Ÿ

[åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•) â€¢ [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„) â€¢ [Windows éƒ¨ç½²](BuildForWindows.md)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

SocketChatSystem æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å±€åŸŸç½‘èŠå¤©åº”ç”¨ï¼Œæ”¯æŒå¤šç”¨æˆ·å®æ—¶é€šä¿¡å’Œæ–‡ä»¶ä¼ è¾“ã€‚é¡¹ç›®é‡‡ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼Œä½¿ç”¨ POSIX Socket è¿›è¡Œç½‘ç»œé€šä¿¡ï¼ŒImGui æä¾›ç°ä»£åŒ–çš„å›¾å½¢ç•Œé¢ã€‚

### æ ¸å¿ƒäº®ç‚¹

- ğŸ¨ **ç°ä»£åŒ– GUI** - ä½¿ç”¨ Dear ImGui æ„å»ºçš„æµç•…ç”¨æˆ·ç•Œé¢
- ğŸ“ **æ–‡ä»¶ä¼ è¾“** - æ”¯æŒä»»æ„å¤§å°æ–‡ä»¶ä¼ è¾“ï¼Œå®æ—¶è¿›åº¦æ˜¾ç¤º
- ğŸ **åŸç”Ÿ macOS é›†æˆ** - Cocoa åŸç”Ÿæ–‡ä»¶é€‰æ‹©å™¨ï¼ŒFinder é›†æˆ
- âš¡ **é«˜æ€§èƒ½** - å¤šçº¿ç¨‹æ¶æ„ï¼ŒUI ä¸é˜»å¡
- ğŸ”’ **çº¿ç¨‹å®‰å…¨** - ä½¿ç”¨äº’æ–¥é”ä¿æŠ¤å…±äº«æ•°æ®

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### å®æ—¶èŠå¤©
- âœ… å¤šç”¨æˆ·åœ¨çº¿èŠå¤©
- âœ… ç”¨æˆ·ä¸Šçº¿/ä¸‹çº¿é€šçŸ¥
- âœ… åœ¨çº¿ç”¨æˆ·åˆ—è¡¨å®æ—¶æ›´æ–°
- âœ… æ¶ˆæ¯æ°”æ³¡å¼æ˜¾ç¤ºï¼ˆå‘é€è€…å³å¯¹é½ï¼Œæ¥æ”¶è€…å·¦å¯¹é½ï¼‰

### æ–‡ä»¶ä¼ è¾“
- âœ… **åŸç”Ÿæ–‡ä»¶é€‰æ‹©å™¨**ï¼ˆmacOS NSOpenPanelï¼‰
- âœ… **åˆ†å—ä¼ è¾“**ï¼ˆ4KB å—å¤§å°ï¼Œæ”¯æŒå¤§æ–‡ä»¶ï¼‰
- âœ… **å®æ—¶è¿›åº¦æ¡**ï¼ˆç™¾åˆ†æ¯”æ˜¾ç¤ºï¼‰
- âœ… **ä¸€é”®æ‰“å¼€æ–‡ä»¶å¤¹**ï¼ˆFinder è‡ªåŠ¨å®šä½æ–‡ä»¶ï¼‰
- âœ… **å¤šæ–‡ä»¶å¹¶å‘ä¼ è¾“**

### ç”¨æˆ·ä½“éªŒ
- âœ… å›ºå®šåº•éƒ¨è¾“å…¥åŒºåŸŸ
- âœ… èŠå¤©å†å²ç‹¬ç«‹æ»šåŠ¨
- âœ… æ–‡ä»¶ä¼ è¾“çŠ¶æ€å§‹ç»ˆå¯è§
- âœ… ç³»ç»Ÿæ¶ˆæ¯æç¤º
- âœ… è¿æ¥çŠ¶æ€æŒ‡ç¤º

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

> [!NOTE]
> æœ¬æŒ‡å—é’ˆå¯¹ macOS å¹³å°ã€‚**Windows ç”¨æˆ·è¯·å‚è€ƒ [BuildForWindows.md](BuildForWindows.md)** è·å–è¯¦ç»†çš„ Windows éƒ¨ç½²æ•™ç¨‹ã€‚

### ç¯å¢ƒè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: macOS (M1/M2/Intel å‡æ”¯æŒ)
- **ç¼–è¯‘å™¨**: Clang (æ”¯æŒ C++17)
- **æ„å»ºå·¥å…·**: CMake 3.10+
- **ä¾èµ–åº“**:
  - OpenGL
  - GLFW 3.3+
  - Dear ImGui (å·²åŒ…å«)

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ Homebrew å®‰è£… GLFW
brew install glfw cmake
```

### ç¼–è¯‘é¡¹ç›®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/liangzikang1/SocketChatSystem.git
cd SocketChatSystem

# åˆ›å»ºæ„å»ºç›®å½•
mkdir -p build
cd build

# ç¼–è¯‘
cmake ..
make

# ç¼–è¯‘æˆåŠŸåä¼šç”Ÿæˆä¸‰ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼š
# - server (æœåŠ¡å™¨)
# - client (æ§åˆ¶å°å®¢æˆ·ç«¯)
# - client_gui (GUI å®¢æˆ·ç«¯)
```

---

## ğŸ“± ä½¿ç”¨æ–¹æ³•

### 1. å¯åŠ¨æœåŠ¡å™¨

```bash
cd build
./server
```

æœåŠ¡å™¨å°†åœ¨ **8080 ç«¯å£**ç›‘å¬è¿æ¥ã€‚

### 2. å¯åŠ¨å®¢æˆ·ç«¯

#### GUI å®¢æˆ·ç«¯ï¼ˆæ¨èï¼‰

```bash
./client_gui
```

**è¿æ¥è®¾ç½®ï¼š**
- **Server IP**: `127.0.0.1` (æœ¬åœ°) æˆ–å®é™…æœåŠ¡å™¨ IP
- **Port**: `8080`
- **Username**: ä»»æ„ç”¨æˆ·åï¼ˆ1-20 å­—ç¬¦ï¼‰

#### æ§åˆ¶å°å®¢æˆ·ç«¯

```bash
./client
```

### 3. ä½¿ç”¨åŠŸèƒ½

#### å‘é€æ¶ˆæ¯
1. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ¶ˆæ¯
2. æŒ‰ `Enter` æˆ–ç‚¹å‡» **Send** æŒ‰é’®

#### å‘é€æ–‡ä»¶
1. ç‚¹å‡» **Send File** æŒ‰é’®
2. åœ¨åŸç”Ÿæ–‡ä»¶é€‰æ‹©å™¨ä¸­é€‰æ‹©æ–‡ä»¶
3. ç­‰å¾…ä¼ è¾“å®Œæˆ
4. æ¥æ”¶æ–¹çœ‹åˆ° **ğŸ“ Open Folder** æŒ‰é’®

#### æ‰“å¼€æ¥æ”¶çš„æ–‡ä»¶
1. æ–‡ä»¶ä¼ è¾“å®Œæˆåï¼Œæ˜¾ç¤ºç»¿è‰² `[Received]` æ ‡ç­¾
2. ç‚¹å‡» **ğŸ“ Open Folder** æŒ‰é’®
3. Finder è‡ªåŠ¨æ‰“å¼€å¹¶é€‰ä¸­æ–‡ä»¶

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client A  â”‚         â”‚   Client B  â”‚
â”‚  (GUI/CLI)  â”‚         â”‚  (GUI/CLI)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                       â”‚
       â”‚    TCP/IP Socket      â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚   Server    â”‚
            â”‚  (Port 8080)â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å®¢æˆ·ç«¯æ¶æ„ï¼ˆGUIï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         UI ä¸»çº¿ç¨‹                â”‚
â”‚  - ImGui æ¸²æŸ“ (60 FPS)          â”‚
â”‚  - ç”¨æˆ·äº¤äº’å¤„ç†                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ SafeQueue (çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ç½‘ç»œå­çº¿ç¨‹                  â”‚
â”‚  - Socket æ”¶å‘                   â”‚
â”‚  - æ¶ˆæ¯è§£æ                      â”‚
â”‚  - æ–‡ä»¶ä¼ è¾“                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åè®®è®¾è®¡

```cpp
// æ¶ˆæ¯å¤´
struct Header {
    uint32_t length;  // åŒ…ä½“é•¿åº¦
    uint8_t type;     // æ¶ˆæ¯ç±»å‹
};

// æ¶ˆæ¯ç±»å‹
enum MessageType {
    MSG_LOGIN = 1,      // ç™»å½•
    MSG_CHAT = 2,       // èŠå¤©æ¶ˆæ¯
    MSG_FILE = 3,       // æ–‡ä»¶å…ƒä¿¡æ¯
    MSG_FILE_DATA = 4,  // æ–‡ä»¶æ•°æ®å—
    MSG_PROGRESS = 5,   // ä¼ è¾“è¿›åº¦
};
```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
SocketChatSystem/
â”œâ”€â”€ CMakeLists.txt          # æ„å»ºé…ç½®
â”œâ”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ NEED.md                 # éœ€æ±‚è§„æ ¼
â”œâ”€â”€ PLAN.md                 # å¼€å‘è®¡åˆ’
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Server.cpp          # æœåŠ¡å™¨å®ç°
â”‚   â”œâ”€â”€ Client.cpp          # æ§åˆ¶å°å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ client_gui.cpp      # GUI å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ Protocol.h          # é€šä¿¡åè®®å®šä¹‰
â”‚   â”œâ”€â”€ SafeQueue.h         # çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—
â”‚   â”œâ”€â”€ file_dialog.h       # æ–‡ä»¶å¯¹è¯æ¡†æ¥å£
â”‚   â””â”€â”€ file_dialog.mm      # macOS åŸç”Ÿæ–‡ä»¶é€‰æ‹©å™¨
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ imgui/              # Dear ImGui åº“
â””â”€â”€ build/
    â”œâ”€â”€ server              # æœåŠ¡å™¨å¯æ‰§è¡Œæ–‡ä»¶
    â”œâ”€â”€ client              # æ§åˆ¶å°å®¢æˆ·ç«¯
    â”œâ”€â”€ client_gui          # GUI å®¢æˆ·ç«¯
    â””â”€â”€ downloads/          # æ¥æ”¶æ–‡ä»¶ä¿å­˜ç›®å½•
```

---

## ğŸ”§ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| **ç¼–ç¨‹è¯­è¨€** | C++17 |
| **ç½‘ç»œé€šä¿¡** | POSIX Socket (TCP) |
| **GUI æ¡†æ¶** | Dear ImGui + GLFW + OpenGL |
| **åŸç”Ÿ API** | Cocoa (NSOpenPanel, Finder) |
| **å¹¶å‘æ¨¡å‹** | C++ Thread + Mutex |
| **æ„å»ºå·¥å…·** | CMake |

---

## ğŸ¯ åŠŸèƒ½æ¼”ç¤º

### èŠå¤©ç•Œé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Online Users (2)  â”‚  Chat Window       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ â€¢ Alice (You)      â”‚ [System] Connected â”‚
â”‚ â€¢ Bob              â”‚ Bob: Hello!        â”‚
â”‚                    â”‚          Me: Hi!   â”‚
â”‚                    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                    â”‚ File Transfers:    â”‚
â”‚                    â”‚ [Received] pic.png â”‚
â”‚                    â”‚   ğŸ“ Open  Remove  â”‚
â”‚                    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                    â”‚ [Input] Send â€¢ Send File â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ å¼€å‘è®¡åˆ’

- [x] åŸºç¡€èŠå¤©åŠŸèƒ½
- [x] GUI ç•Œé¢ï¼ˆImGuiï¼‰
- [x] æ–‡ä»¶ä¼ è¾“ï¼ˆåˆ†å—ï¼‰
- [x] è¿›åº¦æ¡æ˜¾ç¤º
- [x] åŸç”Ÿæ–‡ä»¶é€‰æ‹©å™¨
- [x] Finder é›†æˆ
- [ ] æ–‡ä»¶ä¼ è¾“åŠ å¯†
- [ ] æ–­ç‚¹ç»­ä¼ 
- [ ] ç¾¤ç»„èŠå¤©
- [ ] å†å²è®°å½•ä¿å­˜

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ‘¨â€ğŸ’» ä½œè€…

Created by [Liang Zikang](https://github.com/liangzikang1)

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ï¸ Star æ”¯æŒä¸€ä¸‹ï¼**

Made with â¤ï¸ using C++

</div>
